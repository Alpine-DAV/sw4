#------------------------------
# Grid (w=2500)
#
grid h=200 x=120e3 y=85e3 z=20e3 lat=38.55 lon=-122.3 az=1.43638e+02
#
# Two events:
#
event path=/global/cscratch1/sd/kechen/sw4/inverse/tests/smallDomain_gradient/berkeley-jan-4-2018_output obspath=berkeley-jan-4-2018_data name=berkeley
event path=/global/cscratch1/sd/kechen/sw4/inverse/tests/smallDomain_gradient/alamo-sep-5-2008_output obspath=alamo-sep-5-2008_data name=alamo
#
#------------------------------
# Time, berkeley event
#
time t=40.0 utcstart=01/04/2018:10:39:32.694 event=berkeley
time t=40.0 utcstart=09/06/2008:04:00:10.650 event=alamo
#
#------------------------------
# Paths etc. Note that obspath is defined by the event command
#
fileio verbose=1 temppath=/global/cscratch1/sd/kechen/sw4/inverse/tests/smallDomain_gradient/tmp path=/global/cscratch1/sd/kechen/sw4/inverse/tests/smallDomain_gradient/gradient_output pfs=1
#
#------------------------------
# Use default supergrid parameters
# 
#------------------------------
# 3-d material model
# Earth Model
rfile filename=USGSBayAreaVM-08.3.0-corder.rfile directory=/project/projectdirs/m2868

#topography input=rfile zmax=3.0e3 order=3 file=/project/projectdirs/m2868/USGSBayAreaVM-08.3.0-corder.rfile

# treshold on minimum wave speeds
globalmaterial  vpmin=866 vsmin=500
#
#------------------------------
# Material parameterization
#mparcart nx=1 ny=1 nz=1 init=onep-pr10.bin
mparcart nx=15 ny=10 nz=3 init=0
#
#------------------------------
# Optimizer and properties
#
mrun task=minvert mcheck=on tsoutput=on
nlcg maxit=1 tolerance=1e-12 linesearch=on subtype=polak-ribiere
mscalefactors rho=2650 mu=1.54e10 lambda=7.52e11 misfit=1
#mscalefactors rho=2650 mu=2.5e10 lambda=2.4e12 misfit=1
#
#------------------------------
# Source omega=pi/2 rad/sec -> f0 = 0.25 Hz
# 1 source per event
source lat=37.86119 lon=-122.24233 depth=12101.0 t0=5.0 m0=4.563e+15 mxx=-0.86763 myy=0.8387 mzz=0.02893 mxy=-0.46548 mxz=-0.06266 myz=0.06266 type=Gaussian freq=1.57075 event=berkeley

source lat=37.86081 lon=-122.00107 depth=13207.0 t0=5.0 m0=1.511e+15 mxx=-0.71343 myy=0.70615 mzz=0.00735 mxy=-0.70152 mxz=-0.03112 myz=0.03112 type=Gaussian freq=1.57075 event=alamo
#
#----------------------------
#
developer cfl=1.1
#
#------------------------------
#
# Observations (synthetic) (w=2500)
#Broadband stations (USGS format)
# event=berkeley
observation lat=37.95397 lon=-121.86554 depth=34.7 sacfile1=BK.BDM.BHN.sac sacfile2=BK.BDM.BHE.sac sacfile3=BK.BDM.BHZ.sac event=berkeley
observation lat=37.87622 lon=-122.23558 depth=25.6 sacfile1=BK.BKS.BHN.sac sacfile2=BK.BKS.BHE.sac sacfile3=BK.BKS.BHZ.sac event=berkeley
observation lat=37.87492 lon=-122.24318 depth=0.0 sacfile1=BK.BL67.BHN.sac sacfile2=BK.BL67.BHE.sac sacfile3=BK.BL67.BHZ.sac event=berkeley
observation lat=37.87352 lon=-122.26099 depth=2.7 sacfile1=BK.BRK.BHN.sac sacfile2=BK.BRK.BHE.sac sacfile3=BK.BRK.BHZ.sac event=berkeley
observation lat=38.34526 lon=-122.4584 depth=23.2 sacfile1=BK.CVS.BHN.sac sacfile2=BK.CVS.BHE.sac sacfile3=BK.CVS.BHZ.sac event=berkeley
observation lat=37.40373 lon=-122.23868 depth=0.0 sacfile1=BK.JRSC.BHN.sac sacfile2=BK.JRSC.BHE.sac sacfile3=BK.JRSC.BHZ.sac event=berkeley
observation lat=38.14478 lon=-122.88018 depth=4.0 sacfile1=BK.MCCM.BHN.sac sacfile2=BK.MCCM.BHE.sac sacfile3=BK.MCCM.BHZ.sac event=berkeley
observation lat=37.877526 lon=-122.24889 depth=10.0 sacfile1=BK.VAK.BHN.sac sacfile2=BK.VAK.BHE.sac sacfile3=BK.VAK.BHZ.sac event=berkeley
observation lat=37.62211 lon=-121.75697 depth=30.3 sacfile1=BK.WENL.BHN.sac sacfile2=BK.WENL.BHE.sac sacfile3=BK.WENL.BHZ.sac event=berkeley
#
# event=alamo (station BL67 at LBNL was not in operation in 2008)
observation lat=37.95397 lon=-121.86554 depth=34.7 sacfile1=BK.BDM.BHN.sac sacfile2=BK.BDM.BHE.sac sacfile3=BK.BDM.BHZ.sac event=alamo
observation lat=37.87622 lon=-122.23558 depth=25.6 sacfile1=BK.BKS.BHN.sac sacfile2=BK.BKS.BHE.sac sacfile3=BK.BKS.BHZ.sac event=alamo
observation lat=37.87352 lon=-122.26099 depth=2.7 sacfile1=BK.BRK.BHN.sac sacfile2=BK.BRK.BHE.sac sacfile3=BK.BRK.BHZ.sac event=alamo
observation lat=38.34526 lon=-122.4584 depth=23.2 sacfile1=BK.CVS.BHN.sac sacfile2=BK.CVS.BHE.sac sacfile3=BK.CVS.BHZ.sac event=alamo
observation lat=37.40373 lon=-122.23868 depth=0.0 sacfile1=BK.JRSC.BHN.sac sacfile2=BK.JRSC.BHE.sac sacfile3=BK.JRSC.BHZ.sac event=alamo
observation lat=38.14478 lon=-122.88018 depth=4.0 sacfile1=BK.MCCM.BHN.sac sacfile2=BK.MCCM.BHE.sac sacfile3=BK.MCCM.BHZ.sac event=alamo
observation lat=37.62211 lon=-121.75697 depth=30.3 sacfile1=BK.WENL.BHN.sac sacfile2=BK.WENL.BHE.sac sacfile3=BK.WENL.BHZ.sac event=alamo
#-----------------------------------------------------------------------
#
# Output some images
#
mimage mode=rho x=60e3 cycleInterval=1 
mimage mode=mu x=60e3 cycleInterval=1 
mimage mode=lambda x=60e3 cycleInterval=1
mimage mode=p x=60e3 cycleInterval=1
mimage mode=s x=60e3 cycleInterval=1
mimage mode=gradrho x=60e3 cycleInterval=1
mimage mode=gradmu x=60e3 cycleInterval=1
mimage mode=gradlambda x=60e3 cycleInterval=1
mimage mode=gradp x=60e3 cycleInterval=1
mimage mode=grads x=60e3 cycleInterval=1
#
mimage mode=rho y=42500 cycleInterval=1 
mimage mode=mu y=42500 cycleInterval=1 
mimage mode=lambda y=42500 cycleInterval=1 
mimage mode=p y=42500 cycleInterval=1
mimage mode=s y=42500 cycleInterval=1
mimage mode=gradrho y=42500 cycleInterval=1
mimage mode=gradmu y=42500 cycleInterval=1
mimage mode=gradlambda y=42500 cycleInterval=1
mimage mode=gradp y=42500 cycleInterval=1
mimage mode=grads y=42500 cycleInterval=1
#
mimage mode=rho z=5000 cycleInterval=1 
mimage mode=mu z=5000 cycleInterval=1 
mimage mode=lambda z=5000 cycleInterval=1
mimage mode=p z=5000 cycleInterval=1
mimage mode=s z=5000 cycleInterval=1
mimage mode=gradrho z=5000 cycleInterval=1
mimage mode=gradmu z=5000 cycleInterval=1
mimage mode=gradlambda z=5000 cycleInterval=1
mimage mode=gradp z=5000 cycleInterval=1
mimage mode=grads z=5000 cycleInterval=1 
#
volimage mode=gradrho cycleInterval=1
volimage mode=gradp cycleInterval=1
volimage mode=grads cycleInterval=1
volimage mode=gradlambda cycleInterval=1
volimage mode=gradmu cycleInterval=1
